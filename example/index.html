<!DOCTYPE html>
<html>

<head></head>

<body>
    <!-- websockets.html -->
    <input id="input" type="text" value="test" />
    <input id="idSocket" type="text" placeholder="ID socket" />
    <button onclick="send()">Send</button>
    <pre id="output"></pre>
    <script src="https://hanyny.com/gosocket/gosocket.js"></script>
    <script>
        var _url = "ws://localhost:8080/echo"
        gosocket = gosocket(_url);

        var input = document.getElementById("input");
        var id = document.getElementById("idSocket");

        var output = document.getElementById("output");

        gosocket.on("connection", function (data) {
            output.innerHTML += "Server: ID - " + data.id + "\n";
        })

        gosocket.on("msg", function (data) {
            console.log(data);
            output.innerHTML += "Server: " + data.value + "\n";
        })

        function send() {
            if (id.value) {
                var data = {
                    "socket_id": id.value,
                    "value": input.value
                }
            } else {
                var data = {
                    "value": input.value
                }
            }
            gosocket.emit("msg", data)
            input.value = ""
        }
    </script>
</body>

</html>